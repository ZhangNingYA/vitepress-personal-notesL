---
title: 第31讲：基变换与图像压缩
date: 2025-12-23
---

# MIT 线性代数：基变换与图像压缩（Change of Basis & Image Compression）——详细课堂梳理（含“详解”）

> 这份笔记按课堂叙事顺序组织：先用“视频/图像压缩”引入“换基”，再把压缩写成线性代数公式，最后回到“线性变换在不同基下的矩阵表示”与相似变换。
> 注：课堂用“Fourier basis（傅里叶类基）”讲思路；我在“详解”里补充工程上 JPEG 常用 DCT（离散余弦变换）等实现细节，方便你把数学与工程对应起来。

---

## 目录
1. 课堂如何引入：为什么要讲压缩
2. 知识点 1：图像/视频 = 高维向量
3. 知识点 2：基、坐标与换基（Change of Basis）
4. 知识点 3：用矩阵 $W$ 表示“基”，系数 $c$ 表示“坐标”
5. 知识点 4：正交（归一）基带来的简化：$W^{-1}=W^T$
6. 知识点 5：压缩的线性代数流程：换基（无损）→ 阈值化（有损）→ 重建
7. 知识点 6：课堂例子：哪些“基向量模式”更适合图像（全 1、交替 $\pm1$、半边亮半边暗）
8. 知识点 7：JPEG 的典型分块思想：$8\times 8$ block 与“局部变换”
9. 知识点 8：课堂例子：课程视频压缩（板书清晰但动作跳）
10. 知识点 9：课堂例子：FBI 指纹库压缩与检索
11. 知识点 10：小波（Haar wavelet）与 JPEG2000（对比路线）
12. 知识点 11：回到线性代数主线：同一线性变换在不同基下的矩阵不同
13. 知识点 12：相似变换公式：$B=M^{-1}AM$（换基后的矩阵关系）
14. 知识点 13：按列构造矩阵：第 $j$ 列来自 $T(v_j)$ 的坐标
15. 知识点 14：特征向量基作为“最佳基”的重要例子（通往对角化）

---

## 1) 课堂如何引入：为什么要讲压缩

### 课堂讲法（老师怎么引入）
- 老师开场就说：本讲会把**换基（change of basis）**和一个强应用**图像/视频压缩**结合起来。
- 他用“你正在看的课程视频”做切口：视频本身经过压缩，你会观察到：
  - 板书/静态内容更清楚（容易压）
  - 人的动作会更“跳/不连贯”（运动信息更难压，需要更多比特）

### 详解
- 这段引入的核心是让你先接受一个工程事实：**数据表达方式决定压缩空间**。
- “动作更跳”对应一个信息论直觉：相邻帧差异越大，预测越差，需要更多数据描述变化；而板书变化慢、结构强，容易被“少量参数”概括。

---

## 2) 知识点 1：图像/视频 = 高维向量

### 课堂讲法
- 老师把一帧黑白图像当作像素矩阵，比如 $512\times512$。
- 每个像素一个灰度值（常见 $0\sim255$），于是整张图可以“摊平”为一个向量：
  $$x\in\mathbb{R}^{512^2}$$
- 目的：把图像处理转换成“向量空间上的运算”。


### 详解
- “摊平”就是把二维索引 $(i,j)$ 映射为一维索引 $k$，例如 $k=i\cdot512+j$（具体映射不重要，只要固定一致）。
- 这样做的好处：任何对图像的线性操作（滤波、变换、重建）都能写成矩阵乘法，直接进入线性代数框架。

---

## 3) 知识点 2：基、坐标与换基（Change of Basis）

### 课堂讲法
- 老师强调：像素逐点表示其实是在用“标准基”（每个基向量只在一个像素位置为 1，其余为 0）。
- 压缩的关键：**换一组更“合适”的基**，让图像在新基下的坐标更稀疏（大部分系数很小）。

### 详解
- “基”决定你用什么“积木”去拼出 $x$。
- 标准基的“积木”是一个个孤立像素，适合表达“局部尖点”，但对“平滑大区域”非常低效。
- 更适合图像的基往往是“模式”（pattern）：常量、低频条纹、局部边缘等。图像通常由这些结构组成，因此在这类基下坐标会更集中、更稀疏。

---

## 4) 知识点 3：用矩阵 $W$ 表示“基”，系数 $c$ 表示“坐标”

### 课堂讲法
- 设新基向量为 $v_1,\dots,v_n$（这里 $n$ 可能是 $512^2$ 或者分块后的 $64$）。
- 把它们按列排成矩阵：
  $$W=[v_1 \quad v_2 \quad \cdots \quad v_n]$$
- 用系数向量 $c$ 表示在该基下的坐标，则
  $$x = Wc$$
- 若 $W$ 可逆，则系数为
  $$c = W^{-1}x$$

### 详解
- $x=Wc$ 的含义是：$x$ 是基向量的线性组合
  $$x=\sum_{i=1}^n c_i v_i$$
- “换基”这一步是线性的（矩阵乘法）。
- 压缩之所以成立，是因为对自然图像，选对 $W$ 时 $c$ 会呈现“少数大、多数小”的分布。

---

## 5) 知识点 4：正交（归一）基带来的简化：$W^{-1}=W^T$

### 课堂讲法
- 老师强调“好基”的一个重要性质：如果基是正交（最好是正交归一），逆变换很方便。
- 正交归一时：
  $$W^{-1}=W^T,\quad c=W^T x,\quad x=Wc$$

### 详解
- 正交归一的好处：
  1. **数值稳定**：不会把误差放大太多
  2. **计算省**：逆就是转置
  3. **能量解释清晰**：$\|x\|_2^2=\|c\|_2^2$（能量守恒），便于讨论“保留多少能量”
- 在工程中，很多变换（DCT、某些小波、傅里叶离散变换的正交形式）都追求接近正交归一。

---

## 6) 知识点 5：压缩的线性代数流程（核心）

### 课堂讲法
老师把压缩拆成三步，最关键的是：**换基无损，阈值化有损**。

1) **换基（lossless）**
   $$c=W^{-1}x$$

2) **阈值化 / 置零（lossy）**
   把小系数变成 0，得到 $\hat c$（例如只保留最大的若干项，或按阈值删掉小于阈值的项）。

3) **重建（decode）**
   $$\hat x=W\hat c$$

并用“64 项只保留 2–3 项”这样的数量级举例说明压缩比。

### 详解
- 关键点：**只有第 2 步是非线性的**（置零/量化），也是失真的来源。
- 常见两种阈值化方式：
  - **Hard threshold**：$\hat c_i = c_i\cdot\mathbf{1}(|c_i|\ge\tau)$
  - **Top-$k$ 保留**：只保留绝对值最大的 $k$ 个系数
- 重建误差常用二范数衡量：
  $$\|x-\hat x\|_2$$
  在正交归一基下，这等价于系数空间的误差：
  $$\|x-\hat x\|_2=\|c-\hat c\|_2$$
  这解释了为什么“删掉小系数”往往损失不大：它们本来就贡献很小。

---

## 7) 知识点 6：课堂例子——哪些“基向量模式”更适合图像

### 课堂讲法（老师举的具体模式例子）
老师用非常直观的“基向量长什么样”来解释频率与结构：


1. **全 1 向量（常量模式）**
   表示整幅图整体亮度/平均值（DC 分量）。

2. **交替 $1,-1,1,-1,\dots$（快速振荡）**
   表示像棋盘格那样的快速变化（高频）。

3. **左半全 1、右半全 -1（或上下分块）**
   表示“半边亮半边暗”的缓慢变化（低频但有分界）。

以及“空黑板图像”作为强例子：空黑板接近常量，用全 1 模式一项就能表达很多内容。

### 详解
- 这些模式其实是在给你“频率”的直觉：
  - 常量是**零频/最低频**
  - 交替 $\pm 1$ 是**最高频**之一
  - 半边亮半边暗是**中低频结构**（有一个边界）
- 自然图像通常：
  - 大区域平滑 → 低频系数大
  - 边缘与纹理 → 高频系数相对小但重要
- 这也解释了为什么压缩会优先保留低频：视觉上更“顶梁柱”。

---

## 8) 知识点 7：JPEG 的典型分块思想：$8\times 8$ block 与局部变换

### 课堂讲法
- 老师描述 JPEG 风格的思路：把大图切成许多 $8\times 8$ 小块（每块 $64$ 个像素），在每个块上做一次基变换：
  $$x_{\text{block}}\in\mathbb{R}^{64},\quad c_{\text{block}}=W^{-1}x_{\text{block}}$$
- 然后对每块系数做阈值化，很多系数变 0，再重建。


### 详解
- 为什么分块？
  1. **局部性**：图像统计性质在局部更稳定
  2. **计算可控**：$64\times64$ 变换非常快
  3. **存储/硬件友好**：块处理适合流水线与并行
- 我补充工程对应：
  - JPEG 常用 $8\times8$ 的 **DCT** 作为 $W$（属于“余弦/傅里叶类基”的一个特别常用版本）。
  - 分块会带来“block artifact（块状伪影）”：压缩太狠时块边界会明显，这是阈值化/量化过强的副作用。

---

## 9) 知识点 8：课堂例子——课程视频压缩（板书清晰但动作跳）

### 课堂讲法
- 老师说：你看到的课程视频经过压缩。压缩让板书部分更清楚，但动作会更“跳”，暗示“时间维度上的变化”更难压缩。

### 详解
- 这是在强调：**数据可压缩性取决于结构/冗余**。
- 讲课视频的冗余来自：
  - 背景长时间不变
  - 板书是稀疏变化
- 动作属于更复杂的变化模式，需要更多“基函数”或更多比特描述。

---

## 10) 知识点 9：课堂例子——FBI 指纹库压缩与检索

### 课堂讲法
- 老师提到真实工程背景：FBI 指纹从纸质柜子转为数字化后，数据量巨大，检索很慢，必须做压缩与索引。
- 关键工程决策之一：选什么基来表示指纹，从而既能压缩又能检索快。

### 详解
- 指纹的结构特征（纹线、脊谷、分叉、端点）很“有模式”，因此在合适的基下会更稀疏。
- 这类任务常常不仅追求“视觉还原”，还追求：
  - **特征保真**：分叉点等结构不被抹掉
  - **可检索性**：压缩后仍能快速匹配/比对
- 所以“好基”不一定是让图像看起来最好，而是让“下游任务”最有效。

---

## 11) 知识点 10：小波（Haar wavelet）与 JPEG2000（对比路线）

### 课堂讲法
- 课堂/讲义里把小波（尤其 Haar 小波）作为另一类基：更局部、更分层。
- 并提到 JPEG2000 走小波路线（对比 JPEG 的傅里叶/余弦类路线）。


### 详解
- **傅里叶/余弦类基**更“全局振荡”，适合表示平滑周期结构；
- **小波基**更“局部 + 多尺度”，更擅长表示边缘与突变（图像里边缘极多）。
- Haar 小波可以用很简单的“平均 + 差分”来理解：
  对长度为 2 的信号 $(a,b)$：
  $$\text{avg}=\frac{a+b}{2},\quad \text{diff}=\frac{a-b}{2}$$
  多尺度递归下去就是分层表示（粗略轮廓 + 局部细节），这非常符合图像结构。

---

## 12) 知识点 11：回到线性代数主线——同一线性变换在不同基下矩阵不同

### 课堂讲法
- 老师强调：线性变换 $T$ 是“客观存在”的，不依赖坐标；
- 但矩阵是“在某组基下”对 $T$ 的描述，所以换基会改变矩阵。

### 详解
- 你可以把“线性变换”想成一个机器：输入向量输出向量。
- “矩阵”只是你用某种坐标系给这台机器写出来的说明书。
- 换坐标系，说明书会变，但机器不变。

---

## 13) 知识点 12：相似变换公式——$B=M^{-1}AM$

### 课堂讲法
- 设 $A$ 是 $T$ 在基 $V=\{v_1,\dots,v_n\}$ 下的矩阵；
- $B$ 是 $T$ 在另一基 $U=\{u_1,\dots,u_n\}$ 下的矩阵；
- 存在换基矩阵 $M$ 使：
  $$B=M^{-1}AM$$
  这叫相似（similarity）。

### 详解
- $M$ 的角色：把“$U$ 坐标”与“$V$ 坐标”互相转换。
- 一个常见且清晰的定义方式：
  - 令 $M$ 的列是新基向量用旧基坐标表示（例如把 $u_j$ 展开到 $V$ 的坐标，作为第 $j$ 列）。
- 直观推导（只看思路）：
  - 先把 $U$ 坐标转到 $V$ 坐标：乘 $M$
  - 在 $V$ 坐标里应用 $A$：乘 $A$
  - 再把结果从 $V$ 坐标转回 $U$ 坐标：乘 $M^{-1}$
  - 合起来就是 $M^{-1}AM$

---

## 14) 知识点 13：按列构造矩阵——第 $j$ 列来自 $T(v_j)$

### 课堂讲法
- 给定基 $v_1,\dots,v_n$，要写出 $T$ 的矩阵 $A$：
  1. 计算 $T(v_1),\dots,T(v_n)$
  2. 把每个 $T(v_j)$ 用基 $\{v_i\}$ 展开
  3. 展开系数就是 $A$ 的第 $j$ 列

可写成：
$$A=\big[[T(v_1)]_V \quad [T(v_2)]_V \quad \cdots \quad [T(v_n)]_V \big]$$
其中 $[\,\cdot\,]_V$ 表示“在基 $V$ 下的坐标”。

### 详解
- 这就是“矩阵乘法为什么按列工作”的根源：
  $$A e_j = \text{第 }j\text{ 列}$$
  而 $e_j$ 在坐标意义上对应“只取第 $j$ 个基向量”。
- 这条规则在理解“换基后矩阵变化”时非常关键：列不是随便来的，它编码了 $T$ 对基向量的作用。

---

## 15) 知识点 14：特征向量基作为重要收束（通往对角化）

### 课堂讲法
- 老师指出：一个“最好的例子”是选择特征向量作为基。
- 若 $v_i$ 是特征向量：
  $$T(v_i)=\lambda_i v_i$$
  那么在这组基下，矩阵会变得非常简单（对角/近对角）。

### 详解
- 在特征向量基下，矩阵成为：
  $$A=\mathrm{diag}(\lambda_1,\dots,\lambda_n)$$
  （理想情况下可对角化）。
- 这和压缩的主题有一个深层呼应：
  - 压缩在找“让表示稀疏”的基
  - 对角化在找“让变换简单”的基
  二者都是“通过换基让问题更容易”的典型思想。

---

## 附：用一个极小例子把“换基 + 阈值化”算一遍（帮助你把公式落地）

### 例子设定（1D 信号而不是图像）
- 信号向量 $x\in\mathbb{R}^4$，例如
  $$x=\begin{bmatrix}10\\10\\10\\10\end{bmatrix}$$
- 直觉：这是“常量信号”，应该用“常量基”一项就表示出来。

### 一组“模式基”（示意）
取四个基向量（仅示意，不必拘泥于正交性）：
- $v_1=\begin{bmatrix}1\\1\\1\\1\end{bmatrix}$（常量）
- $v_2=\begin{bmatrix}1\\1\\-1\\-1\end{bmatrix}$（半半）
- $v_3=\begin{bmatrix}1\\-1\\1\\-1\end{bmatrix}$（交替）
- $v_4=\begin{bmatrix}1\\-1\\-1\\1\end{bmatrix}$（另一种振荡）

组成 $W=[v_1 \quad v_2 \quad v_3 \quad v_4]$，求 $c=W^{-1}x$。
你会发现 $x$ 主要落在 $v_1$ 上，其它系数很小或为 0（取决于你是否做了正交归一化）。

### 阈值化与重建
- 如果 $c$ 里只有一个“大系数”，你可以令其它系数为 0 得到 $\hat c$
- 重建 $\hat x=W\hat c$ 仍非常接近原信号
- 这就是课堂“空黑板/常量图像”例子的数学版本：**选对基，信息集中在极少数系数上**。

---

## 最终一句话总结
- 压缩可以被写成：先做线性换基 $c=W^{-1}x$，再做非线性阈值化得到 $\hat c$，再线性重建 $\hat x=W\hat c$。
- 换基不仅服务压缩，也服务“让线性变换矩阵变简单”；同一变换在不同基下矩阵满足相似关系 $B=M^{-1}AM$。